{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/Fps.js","webpack:///./src/js/Player.js","webpack:///./src/js/canvas.js"],"names":["Fps","canvasWidth","times","fps","lastUpdate","lastUpdateCounter","items","lineWidth","maxItems","height","width","position","x","y","c","save","globalAlpha","fillRect","fillStyle","i","item","font","fillText","restore","draw","now","performance","length","shift","delta","push","Player","velocity","canvas","ctx","baseCanvasWidth","baseCanvasHeight","fullscreen","angle","speed","player","fpsCounter","init","document","getElementById","getContext","window","addEventListener","windowSizeChanged","resizeCanvas","initParams","tick","clearRect","Math","sin","drawLine","update","requestAnimationFrame","console","log","devicePixelRatio","style","windowWidth","innerWidth","windowHeight","innerHeight","floor","scale","x1","y1","x2","y2","beginPath","moveTo","lineTo","stroke"],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;;;;;;;;IClFMA,G;AACJ,qBAA6B;AAAA,QAAfC,WAAe,QAAfA,WAAe;;AAAA;;AAC3B,SAAKC,KAAL,GAAa,EAAb;AACA,SAAKC,GAAL,GAAW,CAAX;AACA,SAAKC,UAAL,GAAkB,CAAlB;AACA,SAAKC,iBAAL,GAAyB,CAAzB;AACA,SAAKC,KAAL,GAAa,EAAb;AACA,SAAKC,SAAL,GAAiB,CAAjB;AACA,SAAKC,QAAL,GAAgB,EAAhB;AACA,SAAKC,MAAL,GAAc,EAAd;AACA,SAAKC,KAAL,GAAa,KAAKF,QAAL,GAAgB,KAAKD,SAAlC;AACA,SAAKI,QAAL,GAAgB;AACdC,OAAC,EAAEX,WAAW,GAAG,KAAKS,KAAnB,GAA2B,EADhB;AAEdG,OAAC,EAAE;AAFW,KAAhB;AAID;;;;gCAEW;AAAA,UAALC,CAAK,SAALA,CAAK;AACVA,OAAC,CAACC,IAAF;AAEAD,OAAC,CAACE,WAAF,GAAgB,GAAhB;AACAF,OAAC,CAACG,QAAF,CAAW,KAAKN,QAAL,CAAcC,CAAzB,EAA6B,KAAKD,QAAL,CAAcE,CAA3C,EAA8C,KAAKH,KAAnD,EAA0D,KAAKD,MAA/D;AAEAK,OAAC,CAACI,SAAF,GAAc,OAAd;;AAEA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKX,QAAzB,EAAmCW,CAAC,EAApC,EAAwC;AACtC,YAAMC,IAAI,GAAG,KAAKd,KAAL,CAAWa,CAAX,CAAb;;AACA,YAAIC,IAAJ,EAAU;AACR,cAAMX,MAAM,GAAGW,IAAI,GAAG,KAAKX,MAAZ,GAAqB,EAApC;AACA,cAAMG,CAAC,GAAG,KAAKD,QAAL,CAAcC,CAAd,GAAkBO,CAAC,GAAG,KAAKZ,SAArC;AACA,cAAMM,CAAC,GAAG,KAAKF,QAAL,CAAcE,CAAd,GAAkB,KAAKJ,MAAvB,GAAgCA,MAA1C;AAEAK,WAAC,CAACE,WAAF,GAAgB,GAAhB;AACAF,WAAC,CAACG,QAAF,CAAWL,CAAX,EAAcC,CAAd,EAAiB,KAAKN,SAAtB,EAAiCE,MAAjC;AAEAK,WAAC,CAACE,WAAF,GAAgB,CAAhB;AACAF,WAAC,CAACG,QAAF,CAAWL,CAAX,EAAcC,CAAd,EAAiB,KAAKN,SAAtB,EAAiC,CAAjC;AACD;AACF;;AAEDO,OAAC,CAACO,IAAF,GAAS,YAAT;AACAP,OAAC,CAACQ,QAAF,gBAAoB,KAAKnB,GAAzB,GAAiC,KAAKQ,QAAL,CAAcC,CAA/C,EAAmD,KAAKD,QAAL,CAAcE,CAAjE;AAEAC,OAAC,CAACS,OAAF;AACD;;;kCAEa;AAAA,UAALT,CAAK,SAALA,CAAK;AACZ,WAAKU,IAAL,CAAU;AAAEV,SAAC,EAADA;AAAF,OAAV;AAEA,UAAMW,GAAG,GAAGC,WAAW,CAACD,GAAZ,EAAZ;;AAEA,aAAO,KAAKvB,KAAL,CAAWyB,MAAX,GAAoB,CAApB,IAAyB,KAAKzB,KAAL,CAAW,CAAX,KAAiBuB,GAAG,GAAG,IAAvD,EAA6D;AAC3D,aAAKvB,KAAL,CAAW0B,KAAX;AACD;;AAED,UAAMC,KAAK,GAAG,CAACJ,GAAG,GAAG,KAAKvB,KAAL,CAAW,KAAKA,KAAL,CAAWyB,MAAX,GAAoB,CAA/B,CAAP,IAA4C,IAA5C,IAAoD,CAAlE;;AACA,UAAI,CAAC,KAAKvB,UAAN,IAAqB,KAAKC,iBAAL,GAAyB,KAAKD,UAA/B,IAA8C,GAAtE,EAA2E;AACzE,aAAKA,UAAL,GAAkBqB,GAAlB;AACA,aAAKpB,iBAAL,GAAyBoB,GAAzB;AAEA,aAAKtB,GAAL,GAAW,KAAKD,KAAL,CAAWyB,MAAtB;;AACA,YAAI,KAAKrB,KAAL,CAAWqB,MAAX,GAAoB,KAAKnB,QAA7B,EAAuC;AACrC,eAAKF,KAAL,CAAWsB,KAAX;AACD;;AACD,aAAKtB,KAAL,CAAWwB,IAAX,CAAgB,KAAK3B,GAArB;AACD;;AACD,WAAKE,iBAAL,IAA0BwB,KAA1B;AAEA,WAAK3B,KAAL,CAAW4B,IAAX,CAAgBL,GAAhB;AACD;;;;;;AAGYzB,kEAAf,E;;;;;;;;;;;;;;;;;;;ICxEM+B,M;AACJ,oBAAc;AAAA;;AACZ,SAAKpB,QAAL,GAAgB;AACdC,OAAC,EAAE,GADW;AAEdC,OAAC,EAAE;AAFW,KAAhB;AAIA,SAAKmB,QAAL,GAAgB;AACdpB,OAAC,EAAE,CADW;AAEdC,OAAC,EAAE;AAFW,KAAhB;AAIA,SAAKH,KAAL,GAAa,EAAb;AACA,SAAKD,MAAL,GAAc,EAAd;AACD;;;;+BAEW;AAAA,UAALK,CAAK,QAALA,CAAK;AACVA,OAAC,CAACC,IAAF;AAEAD,OAAC,CAACG,QAAF,CAAW,KAAKN,QAAL,CAAcC,CAAzB,EAA4B,KAAKD,QAAL,CAAcE,CAA1C,EAA6C,KAAKH,KAAlD,EAAyD,KAAKD,MAA9D;AAEAK,OAAC,CAACS,OAAF;AACD;;;kCAEa;AAAA,UAALT,CAAK,SAALA,CAAK;AACZ,WAAKU,IAAL,CAAU;AAAEV,SAAC,EAADA;AAAF,OAAV;AACD;;;;;;AAGYiB,qEAAf,E;;;;;;;;;;;;AC3BA;AAAA;AAAA;AAAA;AACA;AAEA,IAAIE,MAAJ;AACA,IAAIC,GAAJ;AACA,IAAIC,eAAe,GAAG,GAAtB;AACA,IAAIC,gBAAgB,GAAG,GAAvB;AACA,IAAIC,UAAU,GAAG,IAAjB;AAEA,IAAIC,KAAK,GAAG,CAAZ;AACA,IAAIC,KAAK,GAAG,IAAZ;AAEA,IAAIC,MAAJ;AACA,IAAIC,UAAJ;;AAEA,SAASC,IAAT,GACA;AACIT,QAAM,GAAGU,QAAQ,CAACC,cAAT,CAAyB,QAAzB,CAAT;AACAV,KAAG,GAAGD,MAAM,CAACY,UAAP,CAAmB,IAAnB,CAAN;AAEAC,QAAM,CAACC,gBAAP,CAAyB,QAAzB,EAAoCC,iBAApC;AAEAC,cAAY;AAEZC,YAAU;AAEVC,MAAI;AACP;;AAED,SAASD,UAAT,GAAsB;AAClBV,QAAM,GAAG,IAAIT,+CAAJ,EAAT;AACAU,YAAU,GAAG,IAAIzC,4CAAJ,CAAQ;AAAEC,eAAW,EAAEgC,MAAM,CAACvB,KAAP,GAAe;AAA9B,GAAR,CAAb;AACH;;AAED,SAASc,IAAT,GACA;AACIU,KAAG,CAACkB,SAAJ,CAAe,CAAf,EAAmB,CAAnB,EAAuBnB,MAAM,CAACvB,KAA9B,EAAsCuB,MAAM,CAACxB,MAA7C;AAEA,MAAMI,CAAC,GAAGwC,IAAI,CAACC,GAAL,CAAShB,KAAT,IAAkB,GAA5B;AACAA,OAAK,IAAIC,KAAT;;AAEA,OAAK,IAAIpB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,GAApB,EAAyBA,CAAC,EAA1B,EAA8B;AAC1BoC,YAAQ,CAAErB,GAAF,EAAQ,MAAMf,CAAC,GAAGN,CAAlB,EAAsBA,CAAtB,EAA0B,CAA1B,EAA8B,IAA9B,CAAR;AACH;;AAED2B,QAAM,CAACgB,MAAP,CAAc;AAAE1C,KAAC,EAAEoB;AAAL,GAAd;AAGAO,YAAU,CAACe,MAAX,CAAkB;AAAE1C,KAAC,EAAEoB;AAAL,GAAlB;AACH;;AAED,SAASiB,IAAT,GACA;AACIM,uBAAqB,CAAEN,IAAF,CAArB;AAEA3B,MAAI;AACP;;AAED,SAASwB,iBAAT,GACA;AACIC,cAAY;AACZC,YAAU;AACb;;AAED,SAASD,YAAT,GACA;AACIS,SAAO,CAACC,GAAR,CAAa,uBAAqBb,MAAM,CAACc,gBAAzC;AACAF,SAAO,CAACC,GAAR,CAAa,kBAAgB1B,MAAM,CAACvB,KAAvB,GAA6B,KAA7B,GAAmCuB,MAAM,CAACxB,MAAvD;AACAiD,SAAO,CAACC,GAAR,CAAa,wBAAsB1B,MAAM,CAAC4B,KAAP,CAAanD,KAAnC,GAAyC,OAAzC,GAAiDuB,MAAM,CAAC4B,KAAP,CAAapD,MAA9D,GAAqE,IAAlF;;AAEA,MAAK4B,UAAL,EACA;AACI,QAAIyB,WAAW,GAAGhB,MAAM,CAACiB,UAAzB;AACA,QAAIC,YAAY,GAAGlB,MAAM,CAACmB,WAA1B;AACAP,WAAO,CAACC,GAAR,CAAa,kBAAgBG,WAAhB,GAA4B,KAA5B,GAAkCE,YAA/C;AAEA/B,UAAM,CAACvB,KAAP,GAAe2C,IAAI,CAACa,KAAL,CAAYJ,WAAW,GAAGhB,MAAM,CAACc,gBAAjC,CAAf;AACA3B,UAAM,CAACxB,MAAP,GAAgB4C,IAAI,CAACa,KAAL,CAAYF,YAAY,GAAGlB,MAAM,CAACc,gBAAlC,CAAhB;AAEA3B,UAAM,CAAC4B,KAAP,CAAanD,KAAb,GAAqBoD,WAAW,GAAC,IAAjC;AACA7B,UAAM,CAAC4B,KAAP,CAAapD,MAAb,GAAsBuD,YAAY,GAAC,IAAnC;AACH,GAXD,MAaA;AACI/B,UAAM,CAACvB,KAAP,GAAe2C,IAAI,CAACa,KAAL,CAAY/B,eAAe,GAAGW,MAAM,CAACc,gBAArC,CAAf;AACA3B,UAAM,CAACxB,MAAP,GAAgB4C,IAAI,CAACa,KAAL,CAAY9B,gBAAgB,GAAGU,MAAM,CAACc,gBAAtC,CAAhB;AAEA3B,UAAM,CAAC4B,KAAP,CAAanD,KAAb,GAAqByB,eAAe,GAAC,IAArC;AACAF,UAAM,CAAC4B,KAAP,CAAapD,MAAb,GAAsB2B,gBAAgB,GAAC,IAAvC;AACH;;AAEDF,KAAG,CAACiC,KAAJ,CAAWrB,MAAM,CAACc,gBAAlB,EAAqCd,MAAM,CAACc,gBAA5C;AAEAF,SAAO,CAACC,GAAR,CAAa,sBAAoB1B,MAAM,CAACvB,KAA3B,GAAiC,KAAjC,GAAuCuB,MAAM,CAACxB,MAA3D;AACAiD,SAAO,CAACC,GAAR,CAAa,4BAA0B1B,MAAM,CAAC4B,KAAP,CAAanD,KAAvC,GAA6C,OAA7C,GAAqDuB,MAAM,CAAC4B,KAAP,CAAapD,MAAlE,GAAyE,IAAtF;AACH;;AAED,SAAS8C,QAAT,CAAmBrB,GAAnB,EAAyBkC,EAAzB,EAA8BC,EAA9B,EAAmCC,EAAnC,EAAwCC,EAAxC,EACA;AACIrC,KAAG,CAACsC,SAAJ;AACAtC,KAAG,CAACuC,MAAJ,CAAYL,EAAE,GAAC,GAAf,EAAqBC,EAAE,GAAC,GAAxB;AACAnC,KAAG,CAACwC,MAAJ,CAAYJ,EAAE,GAAC,GAAf,EAAqBC,EAAE,GAAC,GAAxB;AACArC,KAAG,CAACyC,MAAJ;AACH;;AAEDjC,IAAI,G","file":"./js/canvas.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/canvas.js\");\n","class Fps {\n  constructor({ canvasWidth }) {\n    this.times = [];\n    this.fps = 0;\n    this.lastUpdate = 0;\n    this.lastUpdateCounter = 0;\n    this.items = [];\n    this.lineWidth = 5;\n    this.maxItems = 30;\n    this.height = 50;\n    this.width = this.maxItems * this.lineWidth;\n    this.position = {\n      x: canvasWidth - this.width - 20,\n      y: 20\n    }\n  }\n\n  draw({ c }) {\n    c.save();\n\n    c.globalAlpha = 0.2;\n    c.fillRect(this.position.x , this.position.y, this.width, this.height);\n    \n    c.fillStyle = \"green\";\n\n    for (let i = 0; i < this.maxItems; i++) {\n      const item = this.items[i];\n      if (item) {\n        const height = item * this.height / 70;\n        const x = this.position.x + i * this.lineWidth;\n        const y = this.position.y + this.height - height;\n  \n        c.globalAlpha = 0.2;\n        c.fillRect(x, y, this.lineWidth, height);\n\n        c.globalAlpha = 1;\n        c.fillRect(x, y, this.lineWidth, 2);\n      }\n    }\n\n    c.font = \"20px Arial\";\n    c.fillText( `FPS: ${this.fps}` , this.position.x , this.position.y );\n    \n    c.restore();\n  }\n\n  update({ c }) {\n    this.draw({ c });\n\n    const now = performance.now();\n\n    while (this.times.length > 0 && this.times[0] <= now - 1000) {\n      this.times.shift();\n    }\n\n    const delta = (now - this.times[this.times.length - 1]) / 1000 || 0;\n    if (!this.lastUpdate || (this.lastUpdateCounter - this.lastUpdate) >= 0.5) {\n      this.lastUpdate = now;\n      this.lastUpdateCounter = now;\n\n      this.fps = this.times.length;\n      if (this.items.length > this.maxItems) {\n        this.items.shift();\n      }\n      this.items.push(this.fps);\n    }\n    this.lastUpdateCounter += delta;\n\n    this.times.push(now);\n  }\n}\n\nexport default Fps;","class Player {\n  constructor() {\n    this.position = {\n      x: 100,\n      y: 100,\n    };\n    this.velocity = {\n      x: 0,\n      y: 20,\n    };\n    this.width = 50;\n    this.height = 50;\n  }\n\n  draw({ c }) {\n    c.save();\n\n    c.fillRect(this.position.x, this.position.y, this.width, this.height);\n    \n    c.restore();\n  }\n\n  update({ c }) {\n    this.draw({ c });\n  }\n}\n\nexport default Player;","import Fps from \"./Fps\";\nimport Player from \"./Player\";\n\nvar canvas;\nvar ctx;\nvar baseCanvasWidth = 640;\nvar baseCanvasHeight = 480;\nvar fullscreen = true;\n\nlet angle = 0;\nlet speed = 0.05;\n\nlet player;\nlet fpsCounter;\n\nfunction init()\n{\n    canvas = document.getElementById( 'canvas' );\n    ctx = canvas.getContext( '2d' );\n\n    window.addEventListener( \"resize\" , windowSizeChanged );\n\n    resizeCanvas();\n\n    initParams();\n\n    tick();\n}\n\nfunction initParams() {\n    player = new Player();\n    fpsCounter = new Fps({ canvasWidth: canvas.width / 2 });\n}\n\nfunction draw()\n{\n    ctx.clearRect( 0 , 0 , canvas.width , canvas.height );\n    \n    const y = Math.sin(angle) * 100;\n    angle += speed;\n\n    for (let i = 0; i < 100; i++) {\n        drawLine( ctx , 100 + i * y , y , 0 , 1000 );\n    }\n\n    player.update({ c: ctx });\n\n\n    fpsCounter.update({ c: ctx });\n}\n\nfunction tick() \n{ \n    requestAnimationFrame( tick );\n\n    draw();\n}\n\nfunction windowSizeChanged()\n{\n    resizeCanvas();\n    initParams();\n}\n\nfunction resizeCanvas()\n{\n    console.log( \"devicePixelRatio: \"+window.devicePixelRatio );\n    console.log( \"canvas size: \"+canvas.width+\" x \"+canvas.height );\n    console.log( \"canvas style size: \"+canvas.style.width+\"px x \"+canvas.style.height+\"px\" );\n\n    if ( fullscreen )\n    {\n        var windowWidth = window.innerWidth;\n        var windowHeight = window.innerHeight;\n        console.log( \"window size: \"+windowWidth+\" x \"+windowHeight );\n\n        canvas.width = Math.floor( windowWidth * window.devicePixelRatio );\n        canvas.height = Math.floor( windowHeight * window.devicePixelRatio );\n\n        canvas.style.width = windowWidth+\"px\";\n        canvas.style.height = windowHeight+\"px\";\n    }\n    else \n    {\n        canvas.width = Math.floor( baseCanvasWidth * window.devicePixelRatio );\n        canvas.height = Math.floor( baseCanvasHeight * window.devicePixelRatio );\n\n        canvas.style.width = baseCanvasWidth+\"px\";\n        canvas.style.height = baseCanvasHeight+\"px\";\n    }\n\n    ctx.scale( window.devicePixelRatio , window.devicePixelRatio );\n\n    console.log( \"new canvas size: \"+canvas.width+\" x \"+canvas.height );\n    console.log( \"new canvas style size: \"+canvas.style.width+\"px x \"+canvas.style.height+\"px\" );\n}\n\nfunction drawLine( ctx , x1 , y1 , x2 , y2 )\n{\n    ctx.beginPath();\n    ctx.moveTo( x1+0.5 , y1+0.5 );\n    ctx.lineTo( x2+0.5 , y2+0.5 );\n    ctx.stroke();\n}\n\ninit();"],"sourceRoot":""}